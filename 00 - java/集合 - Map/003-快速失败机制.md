快速失败机制是java集合中的一种错误机制。

当使用迭代器迭代时，如果发现集合有修改，则快速失败做出响应，抛出ConcurrentModificationException异常。

这种修改有可能是其它线程的修改，也有可能是当前线程自己的修改导致的，比如arrayliat迭代的过程中直接调用本身的remove方法删除元素等。

并不是java中所有的集合都有快速失败机制。比如，像最终一致性的ConcurrentHashMap、CopyOnWriterArrayList等都是没有快速失败机制的。

快速失败机制是怎么实现的？ 像ArrayList、HashMap中都有一个属性叫modCount，每次对集合的修改这个值都会加1，在遍历前记录这个值到expectedModCount中，遍历中检查两者是否一致，如果出现不一致就说明有修改，则抛出ConcurrentModificationException异常。

