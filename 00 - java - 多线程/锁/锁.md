

### synchronized可以用在如下地方

1. 修饰实例方法，对当前实例对象this加锁
2. 修饰静态方法，对当前类的Class对象加锁
3. 修饰代码块，指定加锁对象，对给定对象加锁

### Java对象头

在jvm中，对象在堆内存中的布局分为三块区域：对象头，实例数据，对齐填充

- 实例变量：存放类的属性数据信息，包括父类的属性信息，如果是数组的实例部分还包括数组的长度，这部分内存按4字节对齐。
- 填充数据：由于虚拟机要求对象起始地址必须是8字节的整数倍。填充数据不是必须存在的，仅仅是为了字节对齐，这点了解即可。
- 对象头：synchronized使用的锁对象是存储在Java对象头里的，jvm中采用2个字来存储对象头(如果对象是数组则会分配3个字，多出来的1个字记录的是数组长度)，其主要结构是由Mark Word 和 Class Metadata Address 组成


### Synchronized锁什么时候释放

1. 获取锁的线程执行完了该代码块，会调用monitorexit释放锁
2. 线程执行出现异常

### Synchronized和lock的区别

1. Lock是java实现的类，synchronized是java中的关键词
2. 

### Lock的实现

1. 读可以使用readLock，写可以使用writeLock
2. ReentrankLock，可重入锁，当然synchronzied也是可重入锁
3. ReentrankReadWriteLock，可重入的读写锁