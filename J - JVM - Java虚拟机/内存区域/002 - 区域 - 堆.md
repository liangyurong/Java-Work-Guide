

### java堆的内存

是JVM最大的一块内存空间，主要用于存放new出来的实例对象和数组

### 堆内存分配

    新生代 : 存放新生的对象

        eden、fromSurvivor、toSurvivor

    老年代 : 存放生命周期长的内存对象


### 比例

新生代与老年代的比例：1:2 

堆的大小可以通过参数 –Xms、-Xmx 来指定

Edem : from : to = 8 : 1 : 1 ( 可以通过参数 –XX:SurvivorRatio 来设定 )

### 堆

2、在堆中分配的内存，由Java虚拟机的自动垃圾回收器来管理。

3、在堆中产生了一个数组或对象后，在栈中定义一个特殊的变量，让栈中这个变量的取值等于数组或对象在堆内存中的首地址，栈中的这个变量就成了数组或对象的引用变量。
- 引用变量就相当于是为数组或对象起的一个名称，以后就可以在程序中使用栈中的引用变量来访问堆中的数组或对象。

4、引用变量就相当于是为数组或者对象起的一个名称。
- 引用变量是普通的变量，定义时在栈中分配，引用变量在程序运行到其作用域之外后被释放。
- 而数组和对象本身在堆中分配，即使程序运行到使用 new 产生数组或者对象的语句所在的代码块之外，数组和对象本身占据的内存不会被释放，数组和对象在没有引用变量指向它的时候，才变为垃圾，不能在被使用，但仍然占据内存空间不放，在随后的一个不确定的时间被垃圾回收器收走（释放掉）。这也是java比较占内存的原因。
- 实际上，栈中的变量指向堆内存中的变量，这就是java中的指针！

5、new出来的东西都放在堆内存。
- string str=new string(“s”);
- str在栈内存，实际的string对象在堆内存，str指向string对象在堆内存中的首地址。
- str实际存储的是string对象在堆内存中的首地址。
- new出来的数组也是一个对象。