### 方法区

方法区被所有的线程共享。

### 方法区存储了什么

    被虚拟机加载的类信息

    常量

    静态变量

    运行时常量池：

    字符串常量池：

    即时编译器编译后的代码

### class对象的类型信息

在类加载的“加载”阶段，虚拟机将会读取被编译的class文件生成class对象，class对象存储了一些类型信息，这些信息就是存储在方法区。

类型信息有什么？

    类的版本，字段，方法，接口和常量池。常量池里存储着字面量和符号引用


### 符号引用包括

    类的全限定名

    字段名和属性

    方法名和属性

### 方法区里存class文件信息和class文件常量池是个什么关系。

###  class文件常量池和运行时常量池是什么关系。

### 其他

- java虚拟机规范中定义方法区是堆的一个逻辑部分。
-

### 方法区的特点

- 线程共享。 方法区是堆的一个逻辑部分，因此和堆一样，都是线程共享的。整个虚拟机中只有一个方法区。

- 永久代。 方法区中的信息一般需要长期存在，而且它又是堆的逻辑分区，因此用堆的划分方法，把方法区称为“永久代”。

- 内存回收效率低。 方法区中的信息一般需要长期存在，回收一遍之后可能只有少量信息无效。主要回收目标是：对常量池的回收；对类型的卸载。

- Java 虚拟机规范对方法区的要求比较宽松。 和堆一样，允许固定大小，也允许动态扩展，还允许不实现垃圾回收。

### 栈帧结构

概念

    栈帧随着方法的调用而创建，随着方法的结束而销毁

    栈帧存储了方法的局部变量信息

    栈帧是JVM的栈内存采用栈数据结构进行管理的，遵循先进后出，后进先出

    每个线程有自己的独立栈帧，互不干扰

助记

    栈帧就是分配给方法的一个栈空间

组成

    局部变量表（比如方法里的int x,y,z）、返回地址、锁记录、操作数栈

返回地址

    一个方法运行完，就需要return回当初调用方法的地址，然后让程序继续执行代码



