## 怎么防止接口重复点击

### 什么是接口幂等性

接口幂等性是指：一个接口用同样的参数反复调用，不会造成业务错误，那么这个接口就是具有幂等性的。

比如同一个订单我支付两次，但是只会扣款一次，第二次支付不会扣款，这说明这个支付接口是具有幂等性的

### 问题描述

相同参数相同接口，任意多次请求的结果与一次请求的结果相同

### 解决

前端

    按钮不可点击、置灰、

数据库唯一索引去重

    比如将身份证号作为唯一索引，那么相同的身份证号不可能有两条记录插入。

redis的set去重

    利用set的不可重复原理

数据库锁

    乐观锁

    悲观锁， for update

jvm锁

    单机环境：lock或者synchronized锁

    分布式环境：redis实现分布式锁

token令牌

    执行业务前，先去获取token，服务器会把token保存到redis

    每次接口请求带上token，

    

