## contos


### 在myredis文件夹新建sentinel.conf文件

配置文件

    sentinel monitor mymaster 192.168.64.130 6379 1

文件内容注释

    哨兵 监控  mymatser是为监控对象起的名字  主机ip 主机端口  1表示至少有1个哨兵同意迁移的数量

至少有n个哨兵同意迁移的数量

    一主二从，n=1，当主机挂掉，只要有一个哨兵同意，就可以切换从机为主机

    一主二从，n=2，当主机挂掉，至少需要有2个哨兵同意，才可以切换从机为主机

启动哨兵

    cd redis/src

    ./redis-sentinel /myredis/sentinel.conf

当主机挂掉，从机选举中产生新的主机

    大概10s，可以看到哨兵窗口日志，切换了新的主机

    原主机重启后，会变为新主机的从机

哪个从机会被选举为主机？

    根据优先级别：slave-priority

复制延时

    由于所有写操作都是在主机上，然后同步到所有从机，所以会有这个同步延时。

    当系统很忙碌的时候，这个同步延时问题会更加严重。

    同时，从机数量的增加，也会使得延时问题更加严重。


    

